#{extends 'login.html' /}
#{set title:'日計表' /}


<script type="text/javascript">
<!--
//枠固定の上下の動き
jQuery(document).ready(function() {
    jQuery('#tbody').scroll(function() {
    	//jQuery('#trow').scrollLeft(jQuery(this).scrollLeft());
    	jQuery('#tcol').scrollTop(jQuery(this).scrollTop());
    });
});
//jQuery(document).ready(function() {
//    jQuery('#tbodyR').scroll(function() {
//    	jQuery('#tbody').scrollTop(jQuery(this).scrollTop());
//    	jQuery('#tcol').scrollTop(jQuery(this).scrollTop());
//    });
//});

//枠固定の左右の動き
jQuery(document).ready(function() {
    jQuery('#tbody2').scroll(function() {
    	jQuery('#tbody').scrollLeft(jQuery(this).scrollLeft());
    	jQuery('#trow').scrollLeft(jQuery(this).scrollLeft());
    });
});

//起動時の日毎の部分の幅と高さを調整
jQuery(document).ready(function() {
	jQuery('#tcol').height(jQuery(window).innerHeight()-220);
	jQuery('#tbody').height(jQuery(window).innerHeight()-220);
//	jQuery('#trow').width(jQuery(window).innerWidth()-350-16);
//	jQuery('#tbody').width(jQuery(window).innerWidth()-350);
//	jQuery('#tbody2').width(jQuery(window).innerWidth()-350);
});

//ウィンドウリサイズ時の日毎の部分の幅と高さを調整
jQuery(document).ready(function() {
	jQuery(window).resize(function() {
		jQuery('#tcol').height(jQuery(this).innerHeight()-220);
		jQuery('#tbody').height(jQuery(this).innerHeight()-220);
//		jQuery('#trow').width(jQuery(window).innerWidth()-350-16);
//		jQuery('#tbody').width(jQuery(window).innerWidth()-350);
//		jQuery('#tbody2').width(jQuery(window).innerWidth()-350);
	});
});

jQuery(function() {
	jQuery('input.numeric').autoNumeric({aPad: false, vMax: '999999999.99'});
});

jQuery(function(){
    jQuery.contextMenu({
        selector: '.context-menu-one',
//        trigger: 'hover',
//        autoHide: true,
        callback: function(key, options) {
            var m = "clicked: " + options[0];
//            window.console && console.log(m) || alert(m);
            window.console && console.log(m) || alert(this);
//            location.href='@{DetailList.DetailList(null, null, null, null, null, null, null, null, null, null, null)}'
        },
        items: {
            "quit": {name: "明細へ", arg1: "2012/08/01"}
        }
    });
});
// -->
</script>

<script type="text/javascript" src="@{'/public/javascripts/jquery.datepicker.js'}" ></script>
<script type="text/javascript" src="@{'/public/javascripts/autoNumeric-1.7.5.js'}" ></script>
<script type="text/javascript" src="@{'/public/javascripts/jquery.ui.position.js'}"></script>
<script type="text/javascript" src="@{'/public/javascripts/jquery.contextMenu.js'}"></script>

<link type="text/css" rel="stylesheet" href="@{'/public/stylesheets/jquery.contextMenu.css'}" />


#{form @jump(e_basis_date, sTableType)}
	<!-- 対象年月日 -->
	<input type="text" class="datepicker" name="e_basis_date"
		value="${sBasisDate}" size="13" />
	<input type="submit" value="移動" name="move" />
#{/form}

<table id="tblDailyAccount">
	#{form @updBudget()}
	<input type="hidden" name="bg_basis_date" value="${sBasisDate}"/>
	<tr>
		<td valign="top">
			<div style="width:320px;">
			<table>
				<td>
					<!-- 枠固定の左上 -->
					<table class="dailyAccountTbl">
						<tr style="height:10px">
							<th style="width:22px;"></th>
							<th style="width:184px;" colspan="2" align="right">
								  #{if sTableType== messages.get('views.dailyaccount.dailyaccount')}
									<!-- 予算 -->
									${month}月予算
									<input type="submit" value="更新" name="submitUpdBudget" style="font-size:70%" />
								  #{/if}
							</th>
							<th style="width:92px;">${sTableType== messages.get('views.dailyaccount.dailyaccount') ? month+"月計" : ""}</th>
						</tr>
					</table>
				</td>
			</table>
			</div>
		</td>
		<td>
			<div id="trow" style="width:630px;overflow:hidden;">
			<div style="width:${iWidth}px">
			<table>
				<td>  <!-- このtdの囲いが無いと、firefoxで左のborderが消えてしまう -->
					<!-- 枠固定の右上 -->
					<table class="dailyAccountTbl">
						<tr style="height:10px">
							#{list items:sAryDays, as:'sAryDay'}
								<!-- 
								<th style="border: 1px solid transparent;">
									<input type="text" value="${month}/${iAryDay}" readonly="readonly" style="width:90px;text-align:center;background-color:transparent;border-style:none;" />
								</th>
								 -->
								<th style="width:99px;">
								${sAryDay}
								</th>
							#{/list}
						</tr>
					</table>
				</td>
			</table>
			</div>
			</div>
		</td>

		
		<!-- 
		<td>
		</td>
		 -->
	</tr>

	<tr>
		<td valign="top">
			<div id="tcol" style="height:470px;overflow:hidden;">
			<div style="width:320px;">
			<table>
				<td>
					<!-- 枠固定の左下 -->
					<table class="dailyAccountTbl">
						#{list items:lWDA, as:'lwda'}
							<tr style="height:20px">
								<!-- 日計表 -->
								#{if sTableType== messages.get('views.dailyaccount.dailyaccount')}
									<!-- 予算あり -->
									#{if lwda.bBudgetFlg}
										#{if lwda.sItem != ''}
											<td style="width:20px;"></td>
											<td class="allLine" style="width:90px;">${lwda.sItem}</td>
											<td class="allLineNum" style="width:90px;">
												<input type="hidden" name="e_budget_id" value="${lwda.lBudgetId}"/>
												<input type="hidden" name="e_large_category" value="${lwda.sLargeCategory}"/>
												<input type="hidden" name="e_item" value="${lwda.sItem}"/>
												<input type="text" class="numeric" name="e_budget_amount" value="${lwda.sBudgetAmount}" style="width:90px;text-align:right;background-color:#ffffff;margin:0 auto 0 auto;" />
											</td>
										#{/if}
										#{else}
											<td class="allLine" colspan="2" style="width:110px;">${lwda.sLargeCategory}</td>
											<td class="allLineNum" style="width:90px;">
												<input type="text" readonly="readonly" value="${lwda.sBudgetAmount}" style="width:90px;text-align:right;background-color:#e8e8e8;margin:0 auto 0 auto;" />
											</td>
										#{/else}
									#{/if}
									<!-- 予算なし -->
									#{else}
										#{if lwda.sItem != ''}
											<td style="width:20px;"></td>
											<td class="allLine" colspan="2" style="width:180px;">${lwda.sItem}</td>
										#{/if}
										#{else}
											<td class="allLine" colspan="3" style="width:200px;">${lwda.sLargeCategory}</td>
										#{/else}
									#{/else}
									<!-- 
									<td class="allLineNum">${lwda.sSumMonth}</td>
									 -->
									<td class="allLineNum" style="width:97px;text-align:center;">
										<input type="text" value="${lwda.sSumMonth}" readonly="readonly" style="width:90px;text-align:right;background-color:#e8e8e8;margin:0 auto 0 auto;" />
									</td>
								#{/if}
								<!-- 残高表 -->
								#{else}
									#{if lwda.sItem != ''}
										<td style="width:20px;"></td>
										<td class="allLine" colspan="2" style="width:180px;">${lwda.sItem}</td>
									#{/if}
									#{else}
										<td class="allLine" colspan="3" style="width:200px;">${lwda.sLargeCategory}</td>
									#{/else}
									<!-- 
									<td class="allLineNum">${lwda.sSumMonth}</td>
									 -->
									<td class="allLineNum" style="width:1px;text-align:center;">
										<input type="text" value="${lwda.sSumMonth}" readonly="readonly" style="width:90px;text-align:right;background-color:#e8e8e8;margin:0 auto 0 auto;" />
									</td>
								#{/else}
							</tr>
							
						#{/list}
					</table>
				</td>
			</table>
			</div>
			</div>
		</td>
		<td>
			<!-- 
			<div id="tbody" style="width:816px;height:486px;overflow:auto;">
			<div id="tbody" style="width:630px;height:470px;overflow-x:hidden;overflow-y:hidden;">
			 -->
			<div id="tbody" style="width:646px;height:470px;overflow-x:hidden;overflow-y:auto;">
			<div style="width:${iWidth}px">
			<table>
				<td>  <!-- このtdの囲いが無いと、firefoxで左のborderが消えてしまう -->
					<!-- 枠固定の右下 -->
					<table class="dailyAccountTbl">
						#{list items:lWDA, as:'lwda'}
							<tr style="height:10px">
								#{list items:lwda.sAryDays, as:'sAryDay'}
									<!-- 下のtdのstyleをmain.css内に書くと何故かレイアウトが崩れまくる -->
									<!-- 
									<td style="border: 1px solid black;text-align: right;">${sAryDay}</td>
									 -->
									<td style="border: 1px solid black;width:97px;text-align:center;">
										<input type="text" class="context-menu-one box menu-1" value="${sAryDay}" readonly="readonly" style="width:90px;text-align:right;background-color:#e8e8e8;margin:0 auto 0 auto;" />
									</td>
								#{/list}
							</tr>
							
						#{/list}
					</table>
				</td>
			</table>
			</div>
			</div>
		</td>
		<!-- 
		<td>
			<div id="tbodyR" style="width:26px;height:470px;overflow-x:hidden;overflow-y:auto;">
				<div style="height:500px">
				</div>
			</div>
		</td>
		 -->
	</tr>
	#{/form}

	<tr>
		<td>
			<div>
				<div style="width:320px;">
				</div>
			</div>
		</td>
		<td>
			<div id="tbody2" style="width:646px;height:16px;overflow:auto;">
				<div style="width:${iWidth}px">
				　
				</div>
			</div>
		</td>
		
		
		<!-- 
		<td>
		</td>
		 -->
	</tr>
	
</table>
	
