#{extends 'main.html' /}
#{set title:'Home' /}

<h1>HouseholdAccounts</h1>

<h2>
	<table>
		<tr><td><a href="@{Application.index}">Home</a></td><td>明細表</td></tr>
	</table>
</h2>

#{form @detailList()}
	<script>
	$(function() {
		var dates = $( "#from, #to" ).datepicker({
			defaultDate: "+1w",
			changeMonth: true,
			numberOfMonths: 1,
			showOtherMonths: true,
			selectOtherMonths: true,
			showAnim: "drop",
			changeMonth: true,
			changeYear: true,
			yearRange: '2000:2020',
			onSelect: function( selectedDate ) {
				var option = this.id == "from" ? "minDate" : "maxDate",
					instance = $( this ).data( "datepicker" ),
					date = $.datepicker.parseDate(
						instance.settings.dateFormat ||
						$.datepicker._defaults.dateFormat,
						selectedDate, instance.settings );
				dates.not( this ).datepicker( "option", option, date );
			}
		});
	});
	</script>

	<label for="from">日付範囲：</label>
	<input type="text" id="from" name="dateFr" size="13" value="${dFr}" />
	<label for="to">～</label>
	<input type="text" id="to" name="dateTo" size="13" value="${dTo}" />

	
	<input type="submit" value="絞込" />
#{/form}
	

<br>

#{if records.size() > 0}
		<table border="1">
			<tr>
				<th>日付</th>
				<th>項目</th>
			</tr>
			#{list items:records, as:'record'}
				<tr>
					<td>
						<input type="text" value="${record.payment_date.format('yyyy/MM/dd')}"
							size="13" /> 
					</td>
					<td>
						<select size="1">
							<option value="1"${record.item_id==1 ? ' selected' : ''}>食費</option>
							<option value="2"${record.item_id==2 ? ' selected' : ''}>家財住居</option>
							<option value="3"${record.item_id==3 ? ' selected' : ''}>水道光熱</option>
						</select>
					</td>
				</tr>
			#{/list}
		</table>
#{/if}
